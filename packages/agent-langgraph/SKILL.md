---
name: langgraph-agent
description: LangGraph-based multi-turn dialogue agent engine managing conversation state, intent recognition, tool orchestration, and emotional context memory. Supports 3 core scenarios: quick replies (2-3 rounds), task confirmation (3-5 rounds), and emotional support (3-10 rounds). Use when handling user conversations, routing intents, or managing dialogue flow.
metadata:
  category: agent-engine
  version: 1.0.0
  priority: P0
  estimated-days: 3
  triggers: "chat, dialogue, conversation, intent recognition, å¯¹è¯, æ„å›¾è¯†åˆ«"
  dependencies: ["core", "mcp-bailian-rag", "mcp-feishu-tasks"]
  dependents: ["web", "scheduler"]
allowed-tools: Read Write Edit Bash(pnpm:*:*)
---

# LangGraph Agent å¼•æ“æŠ€èƒ½æ–‡æ¡£

**æ¨¡å—ç±»å‹**: Agentå¼•æ“
**å¼€å‘çŠ¶æ€**: âœ… å·²å®Œæˆ
**ä¼˜å…ˆçº§**: P0
**é¢„è®¡å‘¨æœŸ**: 3 å¤©

---

## ğŸ“– æ¨¡å—æ¦‚è¿°

LangGraph Agent å¼•æ“æ˜¯è€ƒå…¬ Agent çš„æ ¸å¿ƒå¤§è„‘ï¼Œè´Ÿè´£ï¼š
- å¤šè½®å¯¹è¯ç®¡ç†
- æ„å›¾è¯†åˆ«ä¸è·¯ç”±
- å·¥å…·è°ƒç”¨ä¸ç¼–æ’
- æƒ…æ„Ÿä¸Šä¸‹æ–‡è®°å¿†
- çŠ¶æ€æŒä¹…åŒ–

**æ ¸å¿ƒä»·å€¼**:
- æ”¯æŒå¤æ‚çš„å¤šè½®å¯¹è¯åœºæ™¯ï¼ˆå¿«æ·å›å¤ã€ä»»åŠ¡ç¡®è®¤ã€æƒ…æ„Ÿæ”¯æŒï¼‰
- çŠ¶æ€æœºè®¾è®¡ç¡®ä¿å¯¹è¯æµç¨‹å¯æ§
- é›†æˆ MCP å·¥å…·ï¼ˆç™¾ç‚¼ RAGã€é£ä¹¦ä»»åŠ¡ï¼‰

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### åŠŸèƒ½1: å¤šè½®å¯¹è¯çŠ¶æ€æœº

**åŠŸèƒ½æè¿°**: ä½¿ç”¨ LangGraph StateGraph ç®¡ç†å¯¹è¯çŠ¶æ€ã€‚

**çŠ¶æ€ç»“æ„**:
```typescript
interface GraphStateType {
  userId: string;
  messages: BaseMessage[];
  userIntent: UserIntent;
  waitingForUserInput: boolean;
  quickReplyOptions: string[];
  ragResults: any[];
  feishuTaskIds: string[];
  emotionContext?: EmotionContext;
}
```

**æ”¯æŒçš„åœºæ™¯**:
1. **æ—©æ™šæ¨é€å¿«æ·å›å¤** (2-3è½®)
   - å‘é€é—®å€™ â†’ ç”¨æˆ·é€‰æ‹©å¿«æ·å›å¤ â†’ è°ƒæ•´è®¡åˆ’/ç¡®è®¤

2. **ä»»åŠ¡åˆ›å»ºç¡®è®¤æµç¨‹** (3-5è½®)
   - ç”Ÿæˆä»»åŠ¡è®¡åˆ’ â†’ ç”¨æˆ·ç¡®è®¤/è°ƒæ•´ â†’ åˆ›å»ºé£ä¹¦ä»»åŠ¡

3. **æƒ…æ„Ÿæ”¯æŒæ·±åº¦å¯¹è¯** (3-10è½®)
   - è¯†åˆ«æƒ…ç»ª â†’ æ·±åº¦å¯¹è¯ â†’ æƒ…æ„Ÿç–å¯¼ â†’ è®°å½•ä¸Šä¸‹æ–‡

---

### åŠŸèƒ½2: æ„å›¾è¯†åˆ«èŠ‚ç‚¹

**åŠŸèƒ½æè¿°**: è¯†åˆ«ç”¨æˆ·æ„å›¾å¹¶è·¯ç”±åˆ°ç›¸åº”èŠ‚ç‚¹ã€‚

**æ”¯æŒæ„å›¾**:
- `greeting`: æ—©å®‰/æ™šå®‰é—®å€™
- `create_task`: åˆ›å»º/è°ƒæ•´å­¦ä¹ ä»»åŠ¡
- `query_progress`: æŸ¥è¯¢å­¦ä¹ è¿›åº¦
- `emotion_support`: è¡¨è¾¾è´Ÿé¢æƒ…ç»ª/å¯»æ±‚æ”¯æŒ
- `general_qa`: ä¸€èˆ¬æ€§é—®é¢˜å’¨è¯¢

**å®ç°æ–¹å¼**:
```typescript
// ä½¿ç”¨ LLM è¿›è¡Œæ„å›¾è¯†åˆ«
const intentPrompt = `
åˆ†æä»¥ä¸‹ç”¨æˆ·æ¶ˆæ¯çš„æ„å›¾ï¼Œè¿”å›ä»¥ä¸‹ä¹‹ä¸€ï¼š
- greeting: æ—©å®‰/æ™šå®‰é—®å€™
- create_task: åˆ›å»º/è°ƒæ•´å­¦ä¹ ä»»åŠ¡
- query_progress: æŸ¥è¯¢å­¦ä¹ è¿›åº¦
- emotion_support: è¡¨è¾¾è´Ÿé¢æƒ…ç»ª/å¯»æ±‚æ”¯æŒ
- general_qa: ä¸€èˆ¬æ€§é—®é¢˜å’¨è¯¢

ç”¨æˆ·æ¶ˆæ¯ï¼š${content}

åªè¿”å›æ„å›¾åç§°ï¼Œä¸è¦å…¶ä»–å†…å®¹ã€‚
`;
```

---

### åŠŸèƒ½3: æ—©æ™šé—®å€™èŠ‚ç‚¹

**æ—©å®‰é—®å€™èŠ‚ç‚¹**:
- æ—¶é—´ï¼šæ¯å¤© 8:00
- å†…å®¹ï¼šä¸ªæ€§åŒ–é—®å€™ + ä»Šæ—¥å­¦ä¹ å»ºè®®
- å¿«æ·å›å¤é€‰é¡¹ï¼š
  - "å¼€å§‹ä»Šå¤©çš„å­¦ä¹ " â†’ è¿›å…¥ä»»åŠ¡ç”Ÿæˆ
  - "è°ƒæ•´å­¦ä¹ è®¡åˆ’" â†’ è¿›å…¥è®¡åˆ’è°ƒæ•´
  - "æŸ¥çœ‹å­¦ä¹ è¿›åº¦" â†’ è¿›å…¥è¿›åº¦æŸ¥è¯¢

**æ™šé—´å¤ç›˜èŠ‚ç‚¹**:
- æ—¶é—´ï¼šæ¯å¤© 22:00
- å†…å®¹ï¼šä»Šæ—¥å­¦ä¹ æ€»ç»“ + æ˜æ—¥è®¡åˆ’é¢„å‘Š
- å¿«æ·å›å¤é€‰é¡¹ï¼š
  - "è®°å½•ä»Šå¤©çš„å­¦ä¹ å¿ƒå¾—" â†’ è®°å½•å­¦ä¹ ç¬”è®°
  - "æŸ¥çœ‹æœ¬å‘¨æ•°æ®" â†’ è·³è½¬åˆ°æ•°æ®çœ‹æ¿
  - "å‡†å¤‡ä¼‘æ¯" â†’ ç»“æŸå¯¹è¯

---

### åŠŸèƒ½4: ä»»åŠ¡ç”ŸæˆèŠ‚ç‚¹

**åŠŸèƒ½æè¿°**: æ ¹æ®ç”¨æˆ·éœ€æ±‚ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ ä»»åŠ¡ã€‚

**æµç¨‹**:
1. åˆ†æç”¨æˆ·å½“å‰å­¦ä¹ çŠ¶æ€
2. è°ƒç”¨ç™¾ç‚¼ RAG æ£€ç´¢ç›¸å…³ç»éªŒ
3. ç”Ÿæˆä»»åŠ¡è®¡åˆ’ï¼ˆæ¨¡å—ã€æ•°é‡ã€éš¾åº¦ï¼‰
4. ç­‰å¾…ç”¨æˆ·ç¡®è®¤
5. è°ƒç”¨é£ä¹¦ä»»åŠ¡ MCP åˆ›å»ºä»»åŠ¡

**äº¤äº’ç¤ºä¾‹**:
```
AI: æ ¹æ®ä½ æœ€è¿‘çš„å­¦ä¹ æƒ…å†µï¼Œæˆ‘å»ºè®®è¿™å‘¨é‡ç‚¹æ”»å…‹æ•°é‡å…³ç³»ã€‚
    è®¡åˆ’ï¼šæ¯å¤© 20 é¢˜ï¼Œä¸­ç­‰éš¾åº¦ï¼Œé¢„è®¡ 7 å¤©å®Œæˆã€‚
    [ç¡®è®¤è®¡åˆ’] [è°ƒæ•´ä»»åŠ¡]

ç”¨æˆ·: è°ƒæ•´ä»»åŠ¡

AI: å¥½çš„ï¼Œä½ æƒ³è¦å¦‚ä½•è°ƒæ•´ï¼Ÿ
    [å‡å°‘é¢˜é‡] [å¢åŠ éš¾åº¦] [å»¶é•¿å‘¨æœŸ]

ç”¨æˆ·: å‡å°‘é¢˜é‡

AI: æ²¡é—®é¢˜ï¼Œè°ƒæ•´ä¸ºæ¯å¤© 15 é¢˜ï¼Œé¢„è®¡ 9 å¤©å®Œæˆã€‚
    [ç¡®è®¤è®¡åˆ’] [ç»§ç»­è°ƒæ•´]

ç”¨æˆ·: ç¡®è®¤è®¡åˆ’

AI: å¤ªå¥½äº†ï¼æ­£åœ¨ä¸ºä½ åˆ›å»ºé£ä¹¦ä»»åŠ¡...
    ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼ğŸ‰
```

---

### åŠŸèƒ½5: æƒ…æ„Ÿæ”¯æŒèŠ‚ç‚¹

**åŠŸèƒ½æè¿°**: è¯†åˆ«ç”¨æˆ·æƒ…ç»ªï¼Œæä¾›æƒ…æ„Ÿç–å¯¼ã€‚

**è§¦å‘æ¡ä»¶**:
- å…³é”®è¯è¯†åˆ«ï¼šç„¦è™‘ã€å‹åŠ›ã€æ”¾å¼ƒã€æŒ«è´¥ç­‰
- å­¦ä¹ å¼‚å¸¸æ£€æµ‹ï¼šè¿ç»­3å¤©æœªå­¦ä¹ ã€æ­£ç¡®ç‡æŒç»­ä¸‹é™

**æ”¯æŒç­–ç•¥**:
1. **å…±æƒ…å›åº”**: ç†è§£ç”¨æˆ·çš„æ„Ÿå—
2. **ç»éªŒåˆ†äº«**: è°ƒç”¨ RAG æ£€ç´¢ç±»ä¼¼ç»å†çš„è§£å†³æ–¹æ¡ˆ
3. **å»ºè®®å¼•å¯¼**: æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®
4. **æ­£å‘æ¿€åŠ±**: é¼“åŠ±ç”¨æˆ·ç»§ç»­åšæŒ

**ç¤ºä¾‹å¯¹è¯**:
```
ç”¨æˆ·: è¡Œæµ‹ä¸€ç›´å¡åœ¨65åˆ†ï¼Œæ„Ÿè§‰å¾ˆéš¾çªç ´äº†...

AI: æˆ‘ç†è§£ä½ çš„æ„Ÿå—ï¼Œç“¶é¢ˆæœŸç¡®å®è®©äººæ²®ä¸§ã€‚ğŸ˜”
    å¾ˆå¤šè€ƒå‹éƒ½ç»å†è¿‡è¿™ä¸ªé˜¶æ®µï¼Œè®©æˆ‘å¸®ä½ çœ‹çœ‹æœ‰ä»€ä¹ˆæ–¹æ³•...

    [è°ƒç”¨ç™¾ç‚¼ RAG æ£€ç´¢ç»éªŒ]

    æ ¹æ®ä¸Šå²¸è€ƒå‹çš„ç»éªŒï¼Œ65åˆ†åˆ°70åˆ†çš„çªç ´å…³é”®åœ¨äºï¼š
    1. è–„å¼±æ¨¡å—ä¸“é¡¹çªç ´ï¼ˆè€Œä¸æ˜¯å…¨é¢æ’’ç½‘ï¼‰
    2. é”™é¢˜å¤ç›˜ï¼Œæ‰¾å‡ºè§„å¾‹
    3. æ¨¡æ‹Ÿè€ƒè¯•è®­ç»ƒæ—¶é—´åˆ†é…

    è¦ä¸è¦æˆ‘å¸®ä½ åˆ†æä¸€ä¸‹ä½ çš„è–„å¼±æ¨¡å—ï¼Ÿ
    [åˆ†æè–„å¼±æ¨¡å—] [åˆ¶å®šçªç ´è®¡åˆ’] [æˆ‘å†æƒ³æƒ³]
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æŠ€æœ¯æ ˆ

- @langchain/langgraph: LangGraph çŠ¶æ€æœº
- @langchain/core: LangChain æ ¸å¿ƒ
- @langchain/anthropic: Anthropic LLM
- @civil-agent/core: æ ¸å¿ƒç±»å‹å’Œå·¥å…·
- @civil-agent/mcp-bailian-rag: ç™¾ç‚¼ RAG MCP
- @civil-agent/mcp-feishu-tasks: é£ä¹¦ä»»åŠ¡ MCP

### ä»£ç ç»“æ„

```
src/
â”œâ”€â”€ graph/
â”‚   â”œâ”€â”€ state.ts              # GraphState å®šä¹‰
â”‚   â”œâ”€â”€ nodes.ts              # èŠ‚ç‚¹å®šä¹‰
â”‚   â”œâ”€â”€ edges.ts              # è¾¹å®šä¹‰
â”‚   â””â”€â”€ graph.ts              # å›¾æ„å»º
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ mcp-tools.ts          # MCP å·¥å…·å°è£…
â”‚   â””â”€â”€ local-tools.ts        # æœ¬åœ°å·¥å…·
â”œâ”€â”€ prompts/
â”‚   â”œâ”€â”€ system-prompts.ts     # ç³»ç»Ÿæç¤ºè¯
â”‚   â””â”€â”€ task-prompts.ts       # ä»»åŠ¡æç¤ºè¯
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ emotion-detector.ts   # æƒ…æ„Ÿæ£€æµ‹
â”‚   â””â”€â”€ context-enhancer.ts   # ä¸Šä¸‹æ–‡å¢å¼º
â”œâ”€â”€ config/
â”‚   â””â”€â”€ agent.config.ts       # Agent é…ç½®
â””â”€â”€ index.ts                  # å…¥å£æ–‡ä»¶
```

---

## ğŸ”Œ æ¥å£å®šä¹‰

### HTTP API

| ç«¯ç‚¹ | æ–¹æ³• | å‚æ•° | è¿”å›å€¼ | è¯´æ˜ |
|------|------|------|--------|------|
| /api/agent/chat | POST | message, userId, state | AgentResponse | å¯¹è¯æ¥å£ |
| /api/agent/state | GET | userId | GraphStateType | è·å–çŠ¶æ€ |
| /api/agent/reset | POST | userId | void | é‡ç½®å¯¹è¯ |

### AgentResponse ç»“æ„

```typescript
interface AgentResponse {
  response: string;              // AI å›å¤å†…å®¹
  quickReplies?: string[];       // å¿«æ·å›å¤é€‰é¡¹
  waitingForInput: boolean;      // æ˜¯å¦ç­‰å¾…ç”¨æˆ·è¾“å…¥
  state?: GraphStateType;        // å½“å‰çŠ¶æ€ï¼ˆç”¨äºæ¢å¤ï¼‰
}
```

---

## ğŸ“ ä¾èµ–å…³ç³»

### ä¾èµ–çš„æ¨¡å—

- `@civil-agent/core`: ç±»å‹å®šä¹‰ã€æç¤ºè¯ã€å·¥å…·
- `@civil-agent/mcp-bailian-rag`: RAG æ£€ç´¢å·¥å…·
- `@civil-agent/mcp-feishu-tasks`: ä»»åŠ¡ç®¡ç†å·¥å…·

### è¢«ä¾èµ–çš„æ¨¡å—

- `@civil-agent/web`: å‰ç«¯è°ƒç”¨ Agent API
- `@civil-agent/scheduler`: å®šæ—¶ä»»åŠ¡è°ƒç”¨ Agent

---

## ğŸš€ å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# è¿›å…¥ç›®å½•
cd packages/agent-langgraph

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»º
pnpm build

# å¯åŠ¨ Agent æœåŠ¡
pnpm start
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶
ANTHROPIC_API_KEY=your_anthropic_api_key
LANGCHAIN_TRACING_V2=true
LANGCHAIN_API_KEY=your_langchain_api_key
LANGCHAIN_PROJECT=civil-service-agent
```

### LangSmith å¯è§†åŒ–è°ƒè¯•

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export LANGCHAIN_TRACING_V2=true
export LANGCHAIN_API_KEY=your_key

# è¿è¡Œ Agent
pnpm start

# è®¿é—® LangSmith æŸ¥çœ‹çŠ¶æ€æœºæ‰§è¡Œè½¨è¿¹
# https://smith.langchain.com/
```

---

## ğŸ“‹ å¾…åŠäº‹é¡¹

- [x] å®šä¹‰ GraphState çŠ¶æ€ç»“æ„ (0.5å¤©)
- [x] å®ç°æ„å›¾è¯†åˆ«èŠ‚ç‚¹ (0.5å¤©)
- [x] å®ç°æ—©æ™šé—®å€™èŠ‚ç‚¹ (0.5å¤©)
- [x] å®ç°ä»»åŠ¡ç”ŸæˆèŠ‚ç‚¹ (0.5å¤©)
- [x] å®ç°æƒ…æ„Ÿæ”¯æŒèŠ‚ç‚¹ (0.5å¤©)
- [x] é›†æˆ MCP å·¥å…· (0.5å¤©)

---

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### å‰ç«¯è°ƒç”¨ç¤ºä¾‹

```typescript
// Web å‰ç«¯è°ƒç”¨ Agent
async function chatWithAgent(message: string) {
  const response = await fetch('/api/agent/chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      message,
      userId: 'user-123'
    })
  });

  const data = await response.json();

  // æ˜¾ç¤º AI å›å¤
  console.log(data.response);

  // æ˜¾ç¤ºå¿«æ·å›å¤æŒ‰é’®
  if (data.quickReplies) {
    renderQuickReplies(data.quickReplies);
  }

  // ä¿å­˜çŠ¶æ€ï¼ˆç”¨äºä¸‹æ¬¡è¯·æ±‚æ¢å¤ï¼‰
  if (data.waitingForInput) {
    saveState(data.state);
  }
}
```

### è°ƒåº¦å™¨è°ƒç”¨ç¤ºä¾‹

```typescript
// æ—©å®‰é—®å€™ä»»åŠ¡
import { AgentClient } from "@civil-agent/agent-langgraph";

const agent = new AgentClient();

async function morningGreeting(userId: string) {
  const result = await agent.chat({
    message: "TRIGGER_MORNING_GREETING",
    userId
  });

  // å‘é€æ¨é€é€šçŸ¥
  await sendPushNotification({
    userId,
    title: "æ—©ä¸Šå¥½ï¼â˜€ï¸",
    body: result.response,
    quickReplies: result.quickReplies
  });
}
```

---

## ğŸ“ æœ€ä½³å®è·µ

1. **çŠ¶æ€ç®¡ç†**: å§‹ç»ˆä¿å­˜ `state` å¹¶åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶æ¢å¤
2. **å¿«æ·å›å¤**: ä¼˜å…ˆå¼•å¯¼ç”¨æˆ·ä½¿ç”¨å¿«æ·å›å¤ï¼Œæå‡ä½“éªŒ
3. **é”™è¯¯å¤„ç†**: æ•è· LLM å’Œ MCP è°ƒç”¨é”™è¯¯ï¼Œæä¾›å‹å¥½æç¤º
4. **æ€§èƒ½ä¼˜åŒ–**: ç¼“å­˜å¸¸è§é—®é¢˜çš„å›å¤ï¼Œå‡å°‘ LLM è°ƒç”¨
5. **æ—¥å¿—è®°å½•**: è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œæ—¶é—´ï¼Œä¾¿äºä¼˜åŒ–

---

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹çŠ¶æ€æœºæ‰§è¡Œè½¨è¿¹

1. è®¿é—® LangSmith: https://smith.langchain.com/
2. é€‰æ‹©é¡¹ç›®: civil-service-agent
3. æŸ¥çœ‹æœ€è¿‘çš„æ‰§è¡Œè®°å½•
4. ç‚¹å‡»æ¯ä¸ªèŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†è¾“å…¥è¾“å‡º

### æœ¬åœ°æµ‹è¯•èŠ‚ç‚¹

```typescript
// æµ‹è¯•æ„å›¾è¯†åˆ«èŠ‚ç‚¹
import { intentRecognitionNode } from "./nodes";

const state = {
  messages: [new HumanMessage("å¸®æˆ‘åˆ¶å®šå­¦ä¹ è®¡åˆ’")]
};

const result = await intentRecognitionNode(state);
console.log("æ„å›¾:", result.userIntent);
```

### æ€§èƒ½åˆ†æ

```bash
# ä½¿ç”¨ time å‘½ä»¤æµ‹é‡æ‰§è¡Œæ—¶é—´
time pnpm start

# æŸ¥çœ‹ LangSmith ä¸­çš„èŠ‚ç‚¹è€—æ—¶
# æ‰¾å‡ºæ…¢èŠ‚ç‚¹è¿›è¡Œä¼˜åŒ–
```

---

## ğŸ“Š çŠ¶æ€æœºæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    START (ç”¨æˆ·æ¶ˆæ¯)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  intent_recognition  â”‚  æ„å›¾è¯†åˆ«èŠ‚ç‚¹
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
    morning_greeting  generate_task  emotion_support
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚å‘é€é—®å€™ â”‚    â”‚ç”Ÿæˆä»»åŠ¡ â”‚    â”‚æƒ…æ„Ÿç–å¯¼ â”‚
    â”‚+å¿«æ·å›å¤â”‚    â”‚+ç¡®è®¤æµç¨‹â”‚    â”‚+RAGæ£€ç´¢â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   generate_response  â”‚  ç”Ÿæˆæœ€ç»ˆå›å¤
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   END   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-01-23
**ç»´æŠ¤è€…**: sxh
